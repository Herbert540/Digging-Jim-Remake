//
// Created by Herbert Botwe on 11/28/22.
//

#include "game_area.hxx"
std::vector<Position> wall_position_set;
std::vector<Position> sand_position_set;
std::vector<Position> rock_postion_set;
std::vector<Position> diamond_position_set;

/// for Model::restart_g() and Model::play_again_g()
/// Creates the game area using a 2D vector
void
Game_Area::create_map()
{
    char map[19][35] = {
            {'.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.'},
            {'.','p','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','.'},
            {'.','#','o','o','#','#','#','o','#','#','#','#','#','#','#','#','#','#','#','#','#','o','o','#','#','#','#','#','#','#','#','#','#','#','.'},
            {'.','#','#','*','o','o','o','o','*','#','#','#','#','#','#','#','#','#','#','#','#','o','*','o','#','#','#','#','#','#','#','#','#','#','.'},
            {'.','.','.','.','.','.','.','.','.','.','.','.','.','#','#','#','#','#','#','#','#','#','#','o','#','#','#','o','o','o','o','o','o','s','.'},
            {'.','#','#','#','#','o','#','#','#','#','s','s','o','#','#','#','o','s','o','o','#','o','#','#','#','#','#','o','*','#','#','.','#','#','.'},
            {'.','#','#','#','#','o','#','#','#','#','#','#','o','#','#','o','*','#','o','*','#','#','#','#','#','#','#','o','.','#','s','#','#','#','.'},
            {'.','o','o','#','o','o','#','#','#','#','#','#','.','#','#','o','#','#','o','#','#','#','#','#','#','#','#','o','*','*','#','#','#','#','.'},
            {'.','.','o','#','*','o','#','#','#','#','o','.','.','.','.','.','.','.','.','.','.','.','.','.','o','#','#','o','o','.','#','#','#','#','.'},
            {'.','o','#','s','o','#','#','#','#','#','o','#','#','#','#','#','#','#','#','#','.','#','#','.','.','*','#','.','o','o','o','o','o','#','.'},
            {'.','o','#','o','#','#','#','#','#','o','o','#','#','#','#','#','#','#','#','#','s','#','#','#','.','.','#','#','#','#','#','.','.','s','.'},
            {'.','.','.','.','.','#','#','#','#','o','o','o','#','#','#','#','#','#','#','o','s','o','#','#','#','.','.','*','#','#','s','s','o','*','.'},
            {'.','#','#','#','.','#','#','#','#','#','#','o','#','#','#','#','#','#','#','o','.','o','#','#','#','#','.','.','o','#','s','.','*','o','.'},
            {'.','*','*','*','o','o','#','#','#','#','#','#','#','#','o','#','o','#','#','#','.','*','#','#','#','#','#','.','.','#','o','.','o','*','.'},
            {'.','*','*','*','.','#','#','#','#','#','#','#','#','o','o','#','o','o','#','#','.','#','.','#','#','#','#','#','.','#','*','.','.','s','.'},
            {'.','.','o','.','.','.','#','#','#','#','#','#','#','o','.','#','.','o','#','#','*','#','.','#','#','#','#','#','.','#','o','#','#','#','.'},
            {'.','#','o','#','#','.','.','#','#','#','#','#','#','.','o','#','o','.','#','#','#','#','.','#','#','#','#','#','s','s','.','#','#','#','.'},
            {'.','#','#','#','#','#','#','#','#','#','#','#','#','o','.','#','.','o','#','#','#','#','.','#','#','#','#','#','*','s','#','#','#','#','.'},
            {'.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.'}
    };


    char sign;
    for (int i = 0; i < 19; i++)
    {
        for (int j = 0; j < 35; j++)
        {
            sign = map[i][j];

            if(sign == '#'){
                sand_position_set.push_back({j*40,i*40});
            } else if (sign == 'o'){
                rock_postion_set.push_back({j*40,i*40});
            } else if(sign == '.'){
                wall_position_set.push_back({j*40,i*40});
            } else if (sign == '*'){
                diamond_position_set.push_back({j*40, i*40});
            }
        }
    }
}


/// Deletes the previous position sets and creates game area again
/// Helpers: create_map()
void
Game_Area::populate_map()
{
    wall_position_set = {};
    sand_position_set = {};
    rock_postion_set = {};
    diamond_position_set = {};

    create_map();

    wall_positions = wall_position_set;
    sand_positions = sand_position_set;
    rock_postions = rock_postion_set;
    diamond_positions = diamond_position_set;

}

